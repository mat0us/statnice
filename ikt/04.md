<div align="center" style="margin-top: 16px;">
    <strong>Ot√°zka 4</strong>
</div>

<nav style="
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(0,0,0,0.8);
    padding: 8px 0 4px 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    text-align: center;
">
    <a href="03.md" style="color:white; text-decoration:none; margin: 0 16px;">‚¨ÖÔ∏è P≈ôedchoz√≠</a>
    <a href="../README.md" style="color:white; text-decoration:none; margin: 0 16px;">üè† Dom≈Ø</a>
    <a href="05.md" style="color:white; text-decoration:none; margin: 0 16px;">N√°sleduj√≠c√≠ ‚û°Ô∏è</a>
</nav>

# S√≠≈•ov√° komunikace mezi za≈ô√≠zen√≠mi

**Ot√°zka:** Vyu≈æit√≠ fyzick√Ωch komponent poƒç√≠taƒçov√Ωch s√≠t√≠ (p≈ôenosov√° m√©dia a s√≠≈•ov√° za≈ô√≠zen√≠) v r√°mci z√°vƒõreƒçn√© pr√°ce; p≈ôenos sign√°lu a komunikace v m√≠stn√≠ s√≠ti (dr√°tov√© i bezdr√°tov√© s√≠tƒõ); logick√° adresace za≈ô√≠zen√≠; principy smƒõrov√°n√≠ datov√Ωch zpr√°v≈Ø; volba protokolu transportn√≠ vrstvy (TCP, UDP)

---

## 1. √övod do poƒç√≠taƒçov√Ωch s√≠t√≠

Poƒç√≠taƒçov√© s√≠tƒõ p≈ôedstavuj√≠ soubor za≈ô√≠zen√≠, kter√° jsou vz√°jemnƒõ propojena za √∫ƒçelem sd√≠len√≠ dat a zdroj≈Ø. V modern√≠ch aplikac√≠ch, vƒçetnƒõ IoT syst√©m≈Ø, je s√≠≈•ov√° komunikace z√°sadn√≠ pro p≈ôenos dat mezi r≈Øzn√Ωmi komponentami.

### 1.1 Z√°kladn√≠ koncepty

- **S√≠≈•**: Propojen√≠ dvou nebo v√≠ce za≈ô√≠zen√≠ umo≈æ≈àuj√≠c√≠ v√Ωmƒõnu informac√≠
- **Komunikaƒçn√≠ protokol**: Soubor pravidel pro komunikaci mezi za≈ô√≠zen√≠mi
- **Referenƒçn√≠ model ISO/OSI**: Sedmivrstv√Ω model popisuj√≠c√≠ s√≠≈•ovou komunikaci
- **Model TCP/IP**: Zjednodu≈°en√Ω ƒçty≈ôvrstv√Ω model prakticky implementuj√≠c√≠ s√≠≈•ovou komunikaci
  
![s22192206012025](https://a.okmd.dev/md/683cb5cc26ce8.png)

## 2. Fyzick√° vrstva s√≠≈•ov√© komunikace

Fyzick√° vrstva se zab√Ωv√° p≈ôenosem bit≈Ø p≈ôes fyzick√© m√©dium a definuje elektrick√©, mechanick√© a funkƒçn√≠ specifikace pro aktivaci, udr≈æov√°n√≠ a deaktivaci fyzick√©ho spojen√≠.

### 2.1 P≈ôenosov√° m√©dia

### 2.1.1 Metalick√° veden√≠

- **Kroucen√° dvojlinka (Twisted Pair)**:
    - **UTP (Unshielded Twisted Pair)**: Bez st√≠nƒõn√≠, n√°chylnƒõj≈°√≠ k ru≈°en√≠
    - **STP (Shielded Twisted Pair)**: Se st√≠nƒõn√≠m pro vy≈°≈°√≠ odolnost proti ru≈°en√≠
    - **Kategorie**: Cat 5e (1 Gbps), Cat 6 (a≈æ 10 Gbps), Cat 6a, Cat 7, Cat 8
    - **Vyu≈æit√≠**: Ethernet v lok√°ln√≠ch s√≠t√≠ch, strukturovan√° kabel√°≈æ v budov√°ch
- **Koaxi√°ln√≠ kabel**:
    - St≈ôedn√≠ vodiƒç obklopen√Ω dielektrikem a vnƒõj≈°√≠m vodiv√Ωm st√≠nƒõn√≠m
    - Vy≈°≈°√≠ odolnost proti elektromagnetick√© interferenci
    - **Vyu≈æit√≠**: CATV (kabelov√° televize), star≈°√≠ s√≠tƒõ 10BASE2, 10BASE5

### 2.1.2 Optick√° veden√≠

![s22252206012025](https://a.okmd.dev/md/683cb733a2c3f.png)

- **Principy**: P≈ôenos dat pomoc√≠ svƒõteln√Ωch pulz≈Ø v optick√Ωch vl√°knech
- **Typy vl√°ken**:
    - **Jednovidov√° (Single-mode)**: Tenƒç√≠ j√°dro, dlouh√© vzd√°lenosti, vy≈°≈°√≠ cena
    - **Mnohovidov√° (Multi-mode)**: ≈†ir≈°√≠ j√°dro, krat≈°√≠ vzd√°lenosti, ni≈æ≈°√≠ cena
- **V√Ωhody**: Vysok√° p≈ôenosov√° rychlost, imunita v≈Øƒçi elektromagnetick√©mu ru≈°en√≠, del≈°√≠ dosah
- **Vyu≈æit√≠**: P√°te≈ôn√≠ s√≠tƒõ, datov√° centra, d√°lkov√© spoje

### 2.1.3 Bezdr√°tov√° m√©dia

- **R√°diov√© vlny**:
    - R≈Øzn√° frekvenƒçn√≠ p√°sma pro r≈Øzn√© aplikace
    - **Wi-Fi**: 2,4 GHz a 5 GHz p√°sma, standardy IEEE 802.11
    - **Bluetooth**: 2,4 GHz p√°smo, kr√°tk√Ω dosah, n√≠zk√° spot≈ôeba energie
    - **Celul√°rn√≠ s√≠tƒõ**: 2G-5G, rozs√°hl√© pokryt√≠
    - **LPWAN**: LoRaWAN, Sigfox, NB-IoT pro IoT aplikace
- **Infraƒçerven√© z√°≈ôen√≠**:
    - Vy≈æaduje p≈ô√≠mou viditelnost
    - Omezen√Ω dosah
    - **Vyu≈æit√≠**: D√°lkov√° ovl√°d√°n√≠, nƒõkter√© pr≈Ømyslov√© aplikace

TODO: Vlo≈æit tabulku srovn√°vaj√≠c√≠ p≈ôenosov√© rychlosti, maxim√°ln√≠ vzd√°lenosti a typick√© vyu≈æit√≠ r≈Øzn√Ωch p≈ôenosov√Ωch m√©di√≠

### 2.2 Principy p≈ôenosu sign√°lu

### 2.2.1 Analogov√Ω vs.¬†digit√°ln√≠ p≈ôenos

![s22293806012025](https://a.okmd.dev/md/683cb8358ca53.png)

- **Analogov√Ω p≈ôenos**: Kontinu√°ln√≠ sign√°l, n√°chylnƒõj≈°√≠ k ru≈°en√≠ a degradaci
- **Digit√°ln√≠ p≈ôenos**: Diskr√©tn√≠ hodnoty (0 a 1), vy≈°≈°√≠ odolnost proti ru≈°en√≠, mo≈ænost detekce a opravy chyb

### 2.2.2 Modulaƒçn√≠ techniky

![s22305406012025](https://a.okmd.dev/md/683cb88023fd3.png)

- **Amplitudov√° modulace (AM)**: Zmƒõna amplitudy nosn√© vlny
- **Frekvenƒçn√≠ modulace (FM)**: Zmƒõna frekvence nosn√© vlny
- **F√°zov√° modulace (PM)**: Zmƒõna f√°ze nosn√© vlny
- **Kvadraturn√≠ amplitudov√° modulace (QAM)**: Kombinace amplitudov√© a f√°zov√© modulace

### 2.2.3 Multiplexov√°n√≠

![s22313806012025](https://a.okmd.dev/md/683cb8ac3f8b7.png)

- **Frekvenƒçn√≠ multiplexov√°n√≠ (FDM)**: Rozdƒõlen√≠ frekvenƒçn√≠ho p√°sma mezi v√≠ce kan√°l≈Ø
- **ƒåasov√© multiplexov√°n√≠ (TDM)**: St≈ô√≠d√°n√≠ p≈ôenosu dat z r≈Øzn√Ωch zdroj≈Ø v ƒçase
- **Vlnov√© multiplexov√°n√≠ (WDM)**: P≈ôenos v√≠ce sign√°l≈Ø r≈Øzn√Ωmi vlnov√Ωmi d√©lkami v optick√Ωch vl√°knech

TODO: Vlo≈æit obr√°zek ilustruj√≠c√≠ r≈Øzn√© modulaƒçn√≠ techniky a jejich sign√°ly

### 2.3 Fyzick√° topologie s√≠t√≠

- **Sbƒõrnicov√° (Bus)**: Za≈ô√≠zen√≠ p≈ôipojena k jednomu sd√≠len√©mu m√©diu
- **Hvƒõzdicov√° (Star)**: Za≈ô√≠zen√≠ p≈ôipojena k centr√°ln√≠mu uzlu
- **Kruhov√° (Ring)**: Za≈ô√≠zen√≠ tvo≈ô√≠ uzav≈ôen√Ω kruh
- **Mesh (Plnƒõ propojen√°)**: Ka≈æd√© za≈ô√≠zen√≠ propojeno s ka≈æd√Ωm jin√Ωm za≈ô√≠zen√≠m
- **Hybridn√≠**: Kombinace r≈Øzn√Ωch topologi√≠

TODO: Vlo≈æit sch√©mata jednotliv√Ωch topologi√≠ s√≠t√≠

## 3. S√≠≈•ov√° za≈ô√≠zen√≠

### 3.1 Aktivn√≠ s√≠≈•ov√© prvky

- **Opakovaƒç (Repeater)**: Zesiluje sign√°l pro p≈ôekon√°n√≠ vƒõt≈°√≠ch vzd√°lenost√≠
- **Rozboƒçovaƒç (Hub)**: Propojuje v√≠ce za≈ô√≠zen√≠, sd√≠l√≠ ≈°√≠≈ôku p√°sma
- **P≈ôep√≠naƒç (Switch)**: Inteligentn√≠ propojen√≠ za≈ô√≠zen√≠, smƒõrov√°n√≠ na z√°kladƒõ MAC adres
- **Smƒõrovaƒç (Router)**: Propojen√≠ s√≠t√≠, smƒõrov√°n√≠ na z√°kladƒõ IP adres
- **Br√°na (Gateway)**: Propojen√≠ r≈Øzn√Ωch typ≈Ø s√≠t√≠ nebo protokol≈Ø
- **Access Point**: Bezdr√°tov√Ω p≈ô√≠stupov√Ω bod pro p≈ôipojen√≠ k s√≠ti

### 3.2 Pasivn√≠ s√≠≈•ov√© prvky

- **Kabely**: P≈ôenosov√° m√©dia
- **Konektory**: RJ-45, LC/SC (optika), atd.
- **Patch panely**: Propojovac√≠ panely pro strukturovanou kabel√°≈æ
- **Racky**: Sk≈ô√≠nƒõ pro um√≠stƒõn√≠ aktivn√≠ch prvk≈Ø
- **Z√°suvky**: S√≠≈•ov√© z√°suvky v m√≠stnostech

### 3.3 Fyzick√© charakteristiky p≈ôep√≠naƒç≈Ø a smƒõrovaƒç≈Ø

- **Porty**: Poƒçet a typ (RJ-45, SFP, SFP+)
- **Propustnost**: Celkov√° kapacita p≈ôenosu dat
- **Latence**: Zpo≈ædƒõn√≠ p≈ôi zpracov√°n√≠ paket≈Ø
- **Power over Ethernet (PoE)**: Schopnost nap√°jet za≈ô√≠zen√≠ p≈ôes ethernetov√Ω kabel
- **Managementov√© mo≈ænosti**: Konfigurace p≈ôes CLI, webov√© rozhran√≠, SNMP

## 4. Linkov√° vrstva

Linkov√° vrstva zaji≈°≈•uje spolehliv√Ω p≈ôenos dat mezi p≈ô√≠mo propojen√Ωmi za≈ô√≠zen√≠mi a ≈ôe≈°√≠ p≈ô√≠stup k m√©diu.

### 4.1 MAC adresy

- **Definice**: Jedineƒçn√Ω identifik√°tor s√≠≈•ov√©ho za≈ô√≠zen√≠ na linkov√© vrstvƒõ
- **Form√°t**: 48-bitov√° adresa, zapisovan√° jako ≈°est dvojic hexadecim√°ln√≠ch ƒç√≠slic (nap≈ô. 00:1A:2B:3C:4D:5E)
- **OUI (Organizationally Unique Identifier)**: Prvn√≠ t≈ôi bajty identifikuj√≠ v√Ωrobce
- **Broadcast adresa**: FF:FF:FF:FF:FF:FF

### 4.2 P≈ô√≠stupov√© metody k m√©diu

- **CSMA/CD (Carrier Sense Multiple Access with Collision Detection)**:
    - Vyu≈æ√≠van√° v Ethernetu
    - Za≈ô√≠zen√≠ naslouch√° p≈ôed vys√≠l√°n√≠m
    - Detekuje kolize a za≈ô√≠d√≠ opakovan√Ω p≈ôenos
- **CSMA/CA (Carrier Sense Multiple Access with Collision Avoidance)**:
    - Vyu≈æ√≠van√° v bezdr√°tov√Ωch s√≠t√≠ch (Wi-Fi)
    - Sna≈æ√≠ se p≈ôedch√°zet koliz√≠m
- **Token Ring**: P≈ô√≠stup ≈ô√≠zen p≈ôed√°v√°n√≠m tokenu

### 4.3 Ethernet

- **Standardy**: IEEE 802.3
- **Rychlosti**: 10 Mbps, 100 Mbps (Fast Ethernet), 1 Gbps (Gigabit Ethernet), 10 Gbps, 40 Gbps, 100 Gbps
- **R√°mec**: Struktura obsahuj√≠c√≠ hlaviƒçku, data a kontroln√≠ souƒçet

![s22344706012025](https://a.okmd.dev/md/683cb96872db3.png)

### 4.4 Wi-Fi (IEEE 802.11)

- **Standardy**: 802.11a/b/g/n/ac/ax/be
- **Frekvence**: 2,4 GHz a 5 GHz p√°sma, novƒõ 6 GHz (Wi-Fi 6E)
- **Rychlosti**: Od jednotek Mbps a≈æ po jednotky Gbps
- **Zabezpeƒçen√≠**: WEP, WPA, WPA2, WPA3

## 5. S√≠≈•ov√° vrstva a logick√° adresace

### 5.1 IP adresace

### 5.1.1 IPv4

- **Form√°t**: 32-bitov√° adresa rozdƒõlen√° do ƒçty≈ô oktet≈Ø (nap≈ô. 192.168.1.1)
- **T≈ô√≠dy adres**: A, B, C, D (multicast), E (experiment√°ln√≠)
- **Priv√°tn√≠ rozsahy**: 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16
- **Speci√°ln√≠ adresy**: Loopback (127.0.0.1), broadcast (255.255.255.255)
- **CIDR (Classless Inter-Domain Routing)**: Z√°pis pomoc√≠ prefixu s√≠tƒõ (nap≈ô. 192.168.1.0/24)
- **Vyƒçerp√°n√≠ adres**: Omezen√Ω adresn√≠ prostor vedouc√≠ k nutnosti NAT a p≈ôechodu na IPv6

### 5.1.2 IPv6

- **Form√°t**: 128-bitov√° adresa zapisovan√° jako osm skupin hexadecim√°ln√≠ch ƒç√≠slic (nap≈ô. 2001:0db8:85a3:0000:0000:8a2e:0370:7334)
- **Zkr√°cen√Ω z√°pis**: Vynech√°n√≠ √∫vodn√≠ch nul a nahrazen√≠ souvisl√Ωch nulov√Ωch blok≈Ø dvojit√Ωm dvojteƒçkov√Ωm oddƒõlovaƒçem
- **Typy adres**: Glob√°ln√≠ unicast, link-local, unik√°tn√≠ lok√°ln√≠, multicast
- **V√Ωhody**: Obrovsk√Ω adresn√≠ prostor, vestavƒõn√° bezpeƒçnost, automatick√° konfigurace

### 5.2 Smƒõrov√°n√≠

### 5.2.1 Principy smƒõrov√°n√≠

- **Smƒõrovac√≠ tabulka**: Seznam c√≠lov√Ωch s√≠t√≠ a informac√≠ o n√°sleduj√≠c√≠m skoku
- **Metriky**: Krit√©ria pro v√Ωbƒõr nejlep≈°√≠ cesty (poƒçet skok≈Ø, ≈°√≠≈ôka p√°sma, zpo≈ædƒõn√≠)
- **Defaultn√≠ br√°na**: V√Ωchoz√≠ smƒõrovaƒç pro komunikaci mimo lok√°ln√≠ s√≠≈•

### 5.2.2 Smƒõrovac√≠ protokoly

- **IGP (Interior Gateway Protocols)**:
    - **RIP (Routing Information Protocol)**: Jednoduch√Ω, distance-vector, omezen√≠ 15 skok≈Ø
    - **OSPF (Open Shortest Path First)**: Link-state, rychl√° konvergence, podporuje velk√© s√≠tƒõ
    - **EIGRP (Enhanced Interior Gateway Routing Protocol)**: Hybridn√≠ protokol vyvinut√Ω Ciscem
- **EGP (Exterior Gateway Protocols)**:
    - **BGP (Border Gateway Protocol)**: Standard pro smƒõrov√°n√≠ mezi autonomn√≠mi syst√©my na internetu

### 5.2.3 Statick√© vs.¬†dynamick√© smƒõrov√°n√≠

- **Statick√© smƒõrov√°n√≠**: Manu√°ln√≠ konfigurace cest, vhodn√© pro mal√© s√≠tƒõ
- **Dynamick√© smƒõrov√°n√≠**: Automatick√° v√Ωmƒõna informac√≠ mezi smƒõrovaƒçi, adaptace na zmƒõny v s√≠ti

Transportn√≠ vrstva zaji≈°≈•uje end-to-end komunikaci mezi procesy bƒõ≈æ√≠c√≠mi na koncov√Ωch za≈ô√≠zen√≠ch a poskytuje mechanismy pro spolehliv√Ω nebo nespolehliv√Ω p≈ôenos dat.

### 6.1 TCP (Transmission Control Protocol)

- **Charakteristika**: Spojovƒõ orientovan√Ω, spolehliv√Ω protokol
- **Nav√°z√°n√≠ spojen√≠**: Three-way handshake (SYN, SYN-ACK, ACK)
- **≈ò√≠zen√≠ toku**: Zaji≈°tƒõn√≠, ≈æe odes√≠latel nezahlcuje p≈ô√≠jemce
- **≈ò√≠zen√≠ zahlcen√≠**: Adaptace na podm√≠nky v s√≠ti
- **Potvrzov√°n√≠**: Potvrzov√°n√≠ p≈ôijat√Ωch segment≈Ø a opƒõtovn√© vys√≠l√°n√≠ ztracen√Ωch
- **Porty**: 16-bitov√© ƒç√≠slo identifikuj√≠c√≠ aplikaci (0-65535)
- **Hlaviƒçka**: 20-60 bajt≈Ø

¬†![s22374306012025](https://a.okmd.dev/md/683cba1a33f28.png)

### 6.1.1 Mechanismy TCP

- **Posouvaj√≠c√≠ se okno (Sliding Window)**: Efektivn√≠ vyu≈æit√≠ ≈°√≠≈ôky p√°sma
- **Opƒõtovn√© vys√≠l√°n√≠ (Retransmission)**: P≈ôi ztr√°tƒõ nebo po≈°kozen√≠ segmentu
- **Sekvenƒçn√≠ ƒç√≠sla**: Zaji≈°tƒõn√≠ spr√°vn√©ho po≈ôad√≠ doruƒçen√≠
- **Kontroln√≠ souƒçet**: Detekce po≈°kozen√≠ dat

![s22393606012025](https://a.okmd.dev/md/683cba8a73450.png)

### 6.2 UDP (User Datagram Protocol)

- **Charakteristika**: Nespojovƒõ orientovan√Ω, nespolehliv√Ω protokol
- **V√Ωhody**: N√≠zk√° re≈æie, minim√°ln√≠ zpo≈ædƒõn√≠
- **Nev√Ωhody**: Bez z√°ruky doruƒçen√≠, po≈ôad√≠ a deduplikace
- **Hlaviƒçka**: Pouze 8 bajt≈Ø
- **Vhodn√© aplikace**: Streamov√°n√≠ m√©di√≠, online hry, DNS dotazy

![s22410806012025](https://a.okmd.dev/md/683cbae682f81.png)

### 6.3 Porty a sockety

- **Porty**: Identifikuj√≠ aplikace nebo slu≈æby na za≈ô√≠zen√≠
    - **Dob≈ôe zn√°m√© porty (Well-known ports)**: 0-1023
    - **Registrovan√© porty**: 1024-49151
    - **Dynamick√©/priv√°tn√≠ porty**: 49152-65535
    - **P≈ô√≠klady**: HTTP (80), HTTPS (443), SSH (22), MQTT (1883/8883)
- **Socket**: Kombinace IP adresy a portu identifikuj√≠c√≠ konkr√©tn√≠ koncov√Ω bod komunikace

## 7. Aplikaƒçn√≠ protokoly

### 7.1 HTTP/HTTPS

- **HTTP**: Hypertext Transfer Protocol pro p≈ôenos webov√Ωch str√°nek
- **HTTPS**: Zabezpeƒçen√° verze vyu≈æ√≠vaj√≠c√≠ SSL/TLS
- **Metody**: GET, POST, PUT, DELETE, atd.
- **Stavov√© k√≥dy**: 200 OK, 404 Not Found, 500 Internal Server Error, atd.

### 7.2 DNS (Domain Name System)

- **√öƒçel**: P≈ôeklad dom√©nov√Ωch jmen na IP adresy
- **Hierarchick√Ω syst√©m**: Ko≈ôenov√© servery, TLD servery, autoritativn√≠ servery
- **Rekurzivn√≠ vs.¬†iterativn√≠ dotazy**: Zp≈Øsoby z√≠sk√°v√°n√≠ odpovƒõdi

### 7.3 DHCP (Dynamic Host Configuration Protocol)

- **√öƒçel**: Automatick√° konfigurace s√≠≈•ov√Ωch parametr≈Ø
- **Proces**: Discover, Offer, Request, Acknowledge (DORA)
- **P≈ôidƒõlovan√© informace**: IP adresa, maska pods√≠tƒõ, v√Ωchoz√≠ br√°na, DNS servery

### 7.4 MQTT (Message Queuing Telemetry Transport)

- **Charakteristika**: Lehk√Ω publish-subscribe protokol ide√°ln√≠ pro IoT
- **Kvalita slu≈æby (QoS)**: √örovnƒõ 0, 1, 2
- **T√©mata (Topics)**: Hierarchick√° struktura pro organizaci zpr√°v
- **Broker**: Centr√°ln√≠ komponenta zprost≈ôedkuj√≠c√≠ v√Ωmƒõnu zpr√°v

## 8. Zabezpeƒçen√≠ s√≠≈•ov√© komunikace

### 8.1 ≈†ifrov√°n√≠

- **Symetrick√©**: Stejn√Ω kl√≠ƒç pro ≈°ifrov√°n√≠ i de≈°ifrov√°n√≠ (AES, DES)
- **Asymetrick√©**: Ve≈ôejn√Ω a soukrom√Ω kl√≠ƒç (RSA, ECC)
- **Hashovac√≠ funkce**: Jednosmƒõrn√© funkce pro integritu dat (SHA, MD5)

### 8.2 VPN (Virtual Private Network)

- **√öƒçel**: Zabezpeƒçen√© p≈ôipojen√≠ p≈ôes nezabezpeƒçenou s√≠≈•
- **Protokoly**: IPsec, SSL/TLS, OpenVPN, WireGuard
- **Typy**: Site-to-site VPN, Remote-access VPN

### 8.3 Firewall a IDS/IPS

- **Firewall**: Filtrov√°n√≠ s√≠≈•ov√©ho provozu na z√°kladƒõ pravidel
- **IDS (Intrusion Detection System)**: Detekce neautorizovan√Ωch aktivit
- **IPS (Intrusion Prevention System)**: Aktivn√≠ blokov√°n√≠ hrozeb

## 9. S√≠≈•ov√° komunikace v hydroponick√©m syst√©mu

### 9.1 P≈ôehled s√≠≈•ov√© architektury syst√©mu

V r√°mci automatizovan√©ho hydroponick√©ho syst√©mu je implementov√°na v√≠cevrstv√° s√≠≈•ov√° architektura zaji≈°≈•uj√≠c√≠ efektivn√≠ komunikaci mezi v≈°emi komponentami:

```mermaid
flowchart TD
    subgraph "Senzorick√© za≈ô√≠zen√≠"
        ESP32["ESP32\n(Senzorick√° jednotka)"]
    end
    
    subgraph "Lok√°ln√≠ ≈ô√≠d√≠c√≠ centrum"
        RPI["Raspberry Pi 4\n(MQTT Broker, Gateway)"]
    end
    
    subgraph "Cloudov√© slu≈æby"
        CLOUD["Cloud\n(Firebase)"]
    end
    
    subgraph "U≈æivatelsk√© rozhran√≠"
        MOBILE["Mobiln√≠ aplikace"]
        WEB["Webov√Ω prohl√≠≈æeƒç"]
    end
    
    ESP32 <-->|"MQTT p≈ôes Wi-Fi"| RPI
    RPI <-->|"HTTPS, WebSockets\np≈ôes Wi-Fi/Ethernet"| CLOUD
    MOBILE <-->|"HTTPS, WebSockets\np≈ôes Wi-Fi/Celul√°rn√≠ s√≠≈•"| CLOUD
    WEB <-->|"HTTPS, WebSockets"| CLOUD
    MOBILE <-.->|"Alternativn√≠\np≈ô√≠m√© spojen√≠"| RPI
```

### 9.2 Fyzick√° a linkov√° vrstva

### 9.2.1 P≈ôenosov√° m√©dia a technologie

- **Wi-Fi (IEEE 802.11b/g/n)**:
    - Bezdr√°tov√© propojen√≠ ESP32 s Raspberry Pi
    - Frekvence 2,4 GHz pro lep≈°√≠ prostupnost p≈ôek√°≈ækami
    - Rychlost p≈ôipojen√≠ a≈æ 150 Mbps (dostateƒçn√© pro datov√Ω tok senzor≈Ø)
    - Zabezpeƒçen√≠ WPA2-PSK
- **Ethernet**:
    - Voliteln√© dr√°tov√© p≈ôipojen√≠ Raspberry Pi do lok√°ln√≠ s√≠tƒõ
    - Standard 1000BASE-T (Gigabit Ethernet)
    - Vy≈°≈°√≠ spolehlivost a stabilita p≈ôipojen√≠ pro br√°nu

### 9.2.2 Topologie s√≠tƒõ

- **Hvƒõzdicov√° topologie** s Raspberry Pi jako centr√°ln√≠m uzlem
- Z√°lohov√°n√≠ spojen√≠ mezi ESP32 a Raspberry Pi p≈ôi v√Ωpadku Wi-Fi:
    - Lok√°ln√≠ buffer na ESP32 pro doƒçasn√© ukl√°d√°n√≠ dat
    - Automatick√© obnoven√≠ p≈ôenosu po znovunav√°z√°n√≠ spojen√≠

### 9.3 S√≠≈•ov√° a transportn√≠ vrstva

### 9.3.1 IP adresace

- **Lok√°ln√≠ s√≠≈•**:
    - IPv4 adresace v priv√°tn√≠m rozsahu 192.168.x.x
    - DHCP pro dynamick√© p≈ôidƒõlov√°n√≠ adres za≈ô√≠zen√≠m
    - Rezervace IP adresy pro Raspberry Pi (nap≈ô. 192.168.1.10) pro stabiln√≠ konfiguraci
- **Vzd√°len√Ω p≈ô√≠stup**:
    - Mo≈ænost pevn√© ve≈ôejn√© IP adresy pro p≈ô√≠m√Ω p≈ô√≠stup
    - Alternativnƒõ vyu≈æit√≠ DDNS (Dynamic DNS) pro p≈ô√≠stup p≈ôes dom√©nov√© jm√©no
    - Port forwarding na smƒõrovaƒçi pro p≈ôesmƒõrov√°n√≠ po≈æadavk≈Ø na Raspberry Pi

### 9.3.2 Volba transportn√≠ch protokol≈Ø

- **TCP**:
    - Pou≈æito pro konfiguraƒçn√≠ p≈ô√≠kazy vy≈æaduj√≠c√≠ potvrzen√≠
    - SSH p≈ôipojen√≠ k Raspberry Pi pro vzd√°lenou spr√°vu
    - HTTPS komunikace s Firebase a webov√Ωm rozhran√≠m
- **UDP**:
    - Vyu≈æit√≠ pro nekritick√© datov√© toky ze senzor≈Ø, kde je p≈ôijateln√° obƒçasn√° ztr√°ta paketu
    - Ni≈æ≈°√≠ re≈æie pro p≈ôenos velk√©ho mno≈æstv√≠ senzorick√Ωch dat

### 9.4 Aplikaƒçn√≠ protokoly

### 9.4.1 MQTT (Message Queuing Telemetry Transport)

MQTT byl zvolen jako prim√°rn√≠ protokol pro komunikaci mezi ESP32 a Raspberry Pi z n√°sleduj√≠c√≠ch d≈Øvod≈Ø:

- **Lehk√Ω protokol** s minim√°ln√≠mi n√°roky na hardware a s√≠≈•ovou kapacitu
- **Publish-subscribe model** umo≈æ≈àuj√≠c√≠ efektivn√≠ distribuci dat mezi v√≠ce odbƒõrateli
- **Kvalita slu≈æby (QoS)** na t≈ôech √∫rovn√≠ch:
    - QoS 0 (At most once) pro bƒõ≈æn√° senzorick√° data
    - QoS 1 (At least once) pro d≈Øle≈æitƒõj≈°√≠ ≈ô√≠dic√≠ data
    - QoS 2 (Exactly once) pro kritick√© konfiguraƒçn√≠ zmƒõny
- **Struktura t√©mat (topics)**:
    
    ```
    hydroponics/[unit_id]/sensors/temperature
    hydroponics/[unit_id]/sensors/humidity
    hydroponics/[unit_id]/sensors/ph
    hydroponics/[unit_id]/sensors/tds
    hydroponics/[unit_id]/sensors/water_level
    hydroponics/[unit_id]/sensors/light
    hydroponics/[unit_id]/actuators/pump
    hydroponics/[unit_id]/actuators/light
    hydroponics/[unit_id]/system/status
    ```
    
- **Mosquitto MQTT Broker** bƒõ≈æ√≠c√≠ na Raspberry Pi:
    - Autentizace pomoc√≠ u≈æivatelsk√©ho jm√©na a hesla
    - TLS ≈°ifrov√°n√≠ pro zabezpeƒçen√≠ komunikace
    - Perzistence zpr√°v pro uchov√°n√≠ kritick√Ωch dat p≈ôi restartu

TODO: Vlo≈æit diagram zn√°zor≈àuj√≠c√≠ strukturu MQTT t√©mat a smƒõr toku dat

### 9.4.2 RESTful API a Firebase SDK

Pro komunikaci mezi Raspberry Pi, mobiln√≠ aplikac√≠ a webov√Ωm rozhran√≠m je vyu≈æita kombinace:

- **Firebase Realtime Database API**:
    - WebSockets pro real-time aktualizace dat
    - JSON struktura pro ukl√°d√°n√≠ a synchronizaci dat
    - Autentizace pomoc√≠ Firebase Authentication
- **RESTful API** na Raspberry Pi:
    - Endpointy pro manu√°ln√≠ ≈ô√≠zen√≠ a konfiguraci
    - JSON form√°t pro v√Ωmƒõnu dat
    - JWT (JSON Web Tokens) pro autentizaci po≈æadavk≈Ø

### 9.5 ≈òe≈°en√≠ s√≠≈•ov√Ωch v√Ωzev v projektu

### 9.5.1 Zaji≈°tƒõn√≠ spolehlivosti

- **Offline re≈æim ESP32**:
    - Lok√°ln√≠ buffer pro ukl√°d√°n√≠ dat p≈ôi v√Ωpadku spojen√≠
    - Automatick√° resynchronizace po obnoven√≠ spojen√≠
    - NTP synchronizace ƒçasu pro spr√°vn√© ƒçasov√© znaƒçky dat
- **Redundance p≈ôipojen√≠ Raspberry Pi**:
    - Prim√°rn√≠ p≈ôipojen√≠ p≈ôes Ethernet
    - Z√°lo≈æn√≠ p≈ôipojen√≠ p≈ôes Wi-Fi
    - Mo≈ænost 4G/LTE modemu jako druh√© z√°lohy

### 9.5.2 Optimalizace p≈ôenosu dat

- **Agregace dat**:
    - Odes√≠l√°n√≠ d√°vek mƒõ≈ôen√≠ nam√≠sto jednotliv√Ωch hodnot
    - Komprese dat pro sn√≠≈æen√≠ objemu p≈ôenosu
    - Variabiln√≠ frekvence mƒõ≈ôen√≠ podle d≈Øle≈æitosti parametru
- **Filtrov√°n√≠ na hranƒõ**:
    - P≈ôedbƒõ≈æn√© zpracov√°n√≠ dat na ESP32
    - Odes√≠l√°n√≠ pouze signifikantn√≠ch zmƒõn hodnot
    - Prahov√© hodnoty pro detekci anom√°li√≠

### 9.5.3 Zabezpeƒçen√≠ komunikace

- **Zabezpeƒçen√≠ MQTT**:
    - TLS ≈°ifrov√°n√≠ (port 8883)
    - U≈æivatelsk√© jm√©no a heslo pro autentizaci
    - ACL (Access Control List) pro ≈ô√≠zen√≠ p≈ô√≠stupu k t√©mat≈Øm
- **Zabezpeƒçen√≠ webov√© a mobiln√≠ aplikace**:
    - HTTPS pro v≈°echnu komunikaci
    - Firebase Authentication pro spr√°vu p≈ô√≠stupu
    - JWT pro API autorizaci
- **Zabezpeƒçen√≠ lok√°ln√≠ s√≠tƒõ**:
    - Oddƒõlen√° VLAN pro IoT za≈ô√≠zen√≠
    - Filtrov√°n√≠ MAC adres na Wi-Fi
    - Firewall pravidla omezuj√≠c√≠ komunikaci pouze na pot≈ôebn√© protokoly a porty

### 9.6 Monitoring a diagnostika s√≠≈•ov√© komunikace

- **Logging na Raspberry Pi**:
    - Zaznamen√°v√°n√≠ v≈°ech komunikaƒçn√≠ch ud√°lost√≠
    - Detekce a notifikace p≈ôi abnormalit√°ch
    - Rotace log≈Ø pro efektivn√≠ spr√°vu √∫lo≈æi≈°tƒõ
- **Vizualizace s√≠≈•ov√Ωch metrik**:
    - Grafick√© zobrazen√≠ latence, ztr√°tovosti paket≈Ø a propustnosti
    - Historick√© trendy pro identifikaci postupn√© degradace
    - Alerting p≈ôi p≈ôekroƒçen√≠ definovan√Ωch prahov√Ωch hodnot
- **Vzd√°len√° diagnostika**:
    - SSH p≈ô√≠stup pro p≈ô√≠mou spr√°vu syst√©mu
    - MQTT t√©ma pro diagnostick√© p≈ô√≠kazy
    - Automatick√© reportov√°n√≠ stavu za≈ô√≠zen√≠

TODO: Vlo≈æit uk√°zku dashboardu pro monitoring s√≠≈•ov√© komunikace

### 10.1 ≈†k√°lov√°n√≠ syst√©mu

- **Mesh s√≠≈• ESP32 za≈ô√≠zen√≠**:
    - ESP-MESH pro vytvo≈ôen√≠ samoorganizuj√≠c√≠ se s√≠tƒõ
    - Roz≈°√≠≈ôen√≠ dosahu bez dodateƒçn√Ωch p≈ô√≠stupov√Ωch bod≈Ø
    - Automatick√© smƒõrov√°n√≠ dat p≈ôes uzly s√≠tƒõ
- **Distribuovan√° architektura**:
    - V√≠ce Raspberry Pi jednotek pro vƒõt≈°√≠ instalace
    - Synchronizace dat mezi jednotkami
    - Load balancing pro optim√°ln√≠ vyu≈æit√≠ zdroj≈Ø

### 10.2 Integrace pokroƒçil√Ωch s√≠≈•ov√Ωch technologi√≠

- **Edge computing**:
    - P≈ôesun v√≠ce v√Ωpoƒçetn√≠ch operac√≠ na ESP32
    - ML modely pro predikci r≈Østu rostlin bƒõ≈æ√≠c√≠ na hranƒõ
    - Redukce objemu p≈ôen√°≈°en√Ωch dat d√≠ky lok√°ln√≠mu zpracov√°n√≠
- **5G konektivita**:
    - Vy≈°≈°√≠ rychlost a ni≈æ≈°√≠ latence
    - Network slicing pro garantovanou kvalitu slu≈æby
    - P≈ôipojen√≠ velk√©ho poƒçtu za≈ô√≠zen√≠ v hust√Ωch instalac√≠ch

### 10.3 Interoperabilita s dal≈°√≠mi syst√©my

- **Standardizovan√© API**:
    - OpenAPI specifikace pro dokumentaci a testov√°n√≠
    - Webhook integrace pro notifikace extern√≠m syst√©m≈Øm
    - OAuth 2.0 pro bezpeƒçnou autorizaci t≈ôet√≠ch stran
- **IoT platformy**:
    - Integrace s AWS IoT, Azure IoT Hub nebo Google IoT Core
    - Vyu≈æit√≠ pokroƒçil√Ωch analytick√Ωch n√°stroj≈Ø cloudov√Ωch platforem
    - Glob√°ln√≠ ≈°k√°lovatelnost pro komerƒçn√≠ nasazen√≠

## 11. Z√°vƒõr

S√≠≈•ov√° komunikace je kritickou komponentou modern√≠ch IoT ≈ôe≈°en√≠, vƒçetnƒõ automatizovan√©ho hydroponick√©ho syst√©mu. Spr√°vnƒõ navr≈æen√° s√≠≈•ov√° architektura zaji≈°≈•uje efektivn√≠ a bezpeƒçn√Ω tok dat mezi senzorick√Ωmi jednotkami, ≈ô√≠dic√≠m syst√©mem a u≈æivatelsk√Ωmi rozhran√≠mi.

V r√°mci implementovan√©ho hydroponick√©ho syst√©mu byla zvolena kombinace Wi-Fi p≈ôipojen√≠, MQTT protokolu a Firebase cloudov√Ωch slu≈æeb, kter√° poskytuje vyv√°≈æen√Ω pomƒõr mezi spolehlivost√≠, v√Ωkonem a slo≈æitost√≠ implementace. D√≠ky t√©to architektu≈ôe je mo≈æn√© sb√≠rat data ze v≈°ech senzor≈Ø v re√°ln√©m ƒçase, ukl√°dat je pro pozdƒõj≈°√≠ anal√Ωzu a z√°rove≈à poskytovat u≈æivatel≈Øm intuitivn√≠ p≈ô√≠stup skrze mobiln√≠ a webovou aplikaci.

Kl√≠ƒçov√Ωm aspektem ≈ôe≈°en√≠ je robustnost proti v√Ωpadk≈Øm, zabezpeƒçen√≠ komunikace a optimalizace datov√Ωch tok≈Ø, co≈æ zaji≈°≈•uje dlouhodobou stabilitu a ≈°k√°lovatelnost cel√©ho syst√©mu.