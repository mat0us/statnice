<div align="center" style="margin-top: 16px;">
    <strong>OtÃ¡zka 9</strong>
</div>

<nav style="
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(0,0,0,0.8);
    padding: 8px 0 4px 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    text-align: center;
">
    <a href="08.md" style="color:white; text-decoration:none; margin: 0 16px;">â¬…ï¸ PÅ™edchozÃ­</a>
    <a href="../README.md" style="color:white; text-decoration:none; margin: 0 16px;">ğŸ  DomÅ¯</a>
    <a href="10.md" style="color:white; text-decoration:none; margin: 0 16px;">NÃ¡sledujÃ­cÃ­ â¡ï¸</a>
</nav>

# SystÃ©my Å™Ã­zenÃ­ bÃ¡ze dat

<span style="background:#fffde7; color:#f9a825; padding:2px 8px; border-radius:4px; font-weight:bold;">ğŸŸ¡ DÅ¯leÅ¾itÃ¡ otÃ¡zka 2</span>  

<div align="center">

[<kbd> ğŸ“„ PDF k tÃ©to otÃ¡zce](09.pdf)  

</div>

> [!TIP]OtÃ¡zka
> UrÄenÃ­ vhodnÃ©ho databÃ¡zovÃ©ho modelu, vytvoÅ™enÃ­ entitnÄ› relaÄnÃ­ho diagramu, pouÅ¾itÃ­ normÃ¡lnÃ­ch forem pro optimalizaci datovÃ© struktury, fyzickÃ½ model databÃ¡ze a jeho pÅ™evod z ERD; vyuÅ¾itÃ­ jazyka SQL pro zÃ­skÃ¡nÃ­ relevantnÃ­ch dat, datovÃ½ slovnÃ­k, dotazovÃ¡nÃ­; vyuÅ¾itÃ­ transakÄnÃ­ho zpracovÃ¡nÃ­ dat, vlastnosti transakcÃ­, rizika pÅ™i zpracovÃ¡nÃ­ transakcÃ­ a jejich Å™eÅ¡enÃ­; souÄÃ¡sti databÃ¡zovÃ©ho systÃ©mu v Å™eÅ¡enÃ© aplikaci, postavenÃ­ v tÅ™Ã­vrstvÃ© architektuÅ™e, moÅ¾nosti zapojenÃ­ DBS pÅ™i tvorbÄ› aplikacÃ­

---

## DatabÃ¡zovÃ½ systÃ©m

- **databÃ¡ze** - strukturovanÃ¡ mnoÅ¾ina homogennÃ­ch souborÅ¯
- **systÃ©m Å™Ã­zenÃ­ bÃ¡ze dat**
  - integrovanÃ½ softwarovÃ½ prostÅ™edek Å™Ã­dÃ­cÃ­ bÃ¡zi dat
  - umoÅ¾Åˆuje nÃ¡m provÃ¡dÄ›t operace nad databÃ¡zÃ­
  - je to kolekce programÅ¯, kterÃ¡ tvoÅ™Ã­ rozhranÃ­ mezi aplikaÄnÃ­mi programy a uloÅ¾enÃ½mi daty
- **databÃ¡zovÃ½ systÃ©m** - spojenÃ­ databÃ¡ze a systÃ©mu Å™Ã­zenÃ­ bÃ¡ze dat

## DatabÃ¡zovÃ© modely

- sÃ­Å¥ovÃ½ databÃ¡zovÃ½ model - historickÃ½
- hiearchickÃ½ databÃ¡zovÃ½ model - speciÃ¡lnÃ­ pÅ™Ã­pad sÃ­Å¥ovÃ©ho - historickÃ½
- relaÄnÃ­ databÃ¡zovÃ½ model - pouÅ¾Ã­vanÃ½ dnes

## DatovÃ© modely

DatovÃ½ model popisuje data a jejich strukturu.

3 pohledy na data:

- vnÄ›jÅ¡Ã­ pohled - aplikaÄnÃ­ ÃºroveÅˆ, uÅ¾ivatelskÃ½ pohled. Je to pohled bÄ›Å¾nÃ©ho uÅ¾ivatele, kterÃ©ho nezajÃ­majÃ­ hlubÅ¡Ã­ souvislosti mezi daty.
- konceptuÃ¡lnÃ­ nebo logickÃ½ pohled - logika modelu (co chceme), vybÃ­rÃ¡me objekty a vztahy. Modelujeme pomocÃ­ ERD (entitnÄ› relaÄnÃ­ diagram)
- fyzickÃ½ pohled - jakÃ½m zpÅ¯sobem jsou uloÅ¾ena data (jak to bude realizovÃ¡no), nÃ¡vrh implementace, integritnÃ­ omezenÃ­

### EntitnÄ› relaÄnÃ­ diagram

<img src="img/09/db-erd.png" height="500px"/>

Obsahuje entity a vazby mezi nimi.

Entita

- nÃ¡zev
- atributy (povinnÃ©, volitelnÃ©, primÃ¡rnÃ­ identifikÃ¡tor, unikÃ¡tnÃ­)

Vztahy

- kardinalita (nÃ¡sobnost) - 1:1, 1:N, M:N
- povinnost - povinnÃ©, nepovinnÃ©

NormÃ¡lnÃ­ formy = pravidla pro sprÃ¡vnou strukturu datovÃ©ho modelu

1. normÃ¡lnÃ­ forma - atomiÄnost (neopakujÃ­ se atributy stejnÃ©ho typu)
2. normÃ¡lnÃ­ forma - musÃ­ platit 1 NF. KaÅ¾dÃ½ neklÃ­ÄovÃ½ atribut je plnÄ› zÃ¡vislÃ½ na kaÅ¾dÃ©m kandidÃ¡tnÃ­m klÃ­Äi - to se splnÃ­ tak Å¾e kaÅ¾dÃ¡ entita mÃ¡ jeden primÃ¡rnÃ­ identifikÃ¡tor
3. normÃ¡lnÃ­ forma - musÃ­ platit 2 NF. VÅ¡echny neklÃ­ÄovÃ© atributy musÃ­ bÃ½t vzÃ¡jemnÄ› nezÃ¡vislÃ© - mÃ¡m entitu sklad a objednÃ¡vka, atributy patÅ™Ã­cÃ­ k objednÃ¡vce nedÃ¡vÃ¡m do skladu

## FyzickÃ½ model

Model popisujÃ­cÃ­ fyzickÃ½ pohled. Jak budeme data uklÃ¡dat do relaÄnÃ­ databÃ¡ze

ZmÄ›na terminologie
|KonceptuÃ¡lnÃ­|FyzickÃ½|
|------------|--------|
|entita | tabulka |
|instance | Å™Ã¡dek |
| atribut | sloupec |
| primÃ¡rnÃ­ identifikÃ¡tor| primÃ¡rnÃ­ klÃ­Ä |
| sekundÃ¡rnÃ­ identifikÃ¡tor | unikÃ¡tnÃ­ klÃ­Ä |
|vztah | cizÃ­ klÃ­Ä |

- povinnost vazby se v rÃ¡mci relaÄnÃ­ databÃ¡ze dÃ¡ vynutit pouze jednÃ© stranÄ› vazby â€“ tÃ©, kterÃ¡ se promÃ­tne jako novÃ½ sloupec (uklÃ¡dÃ¡ cizÃ­ klÃ­Ä)
- u vazeb M:N se provÃ¡dÃ­ dekompozice - vznik asociaÄnÃ­ tabulky

## SQL

= Structured Query Language

- deklarativnÃ­, strukturovanÃ½, dotazovacÃ­ jazyk

dÄ›lÃ­ se na:

- DDL (Data Definition Language) - prÃ¡ce s datovÃ½mi strukturami, jejich vytvÃ¡Å™enÃ­m, Ãºpravou a odstraÅˆovÃ¡nÃ­m (CREATE, ALTER, DROP)
- DML (Data Manipulation Language) - Ãºprava datovÃ©ho obsahu. UmoÅ¾Åˆuje data vklÃ¡dat, mÄ›nit a mazat (SELECT, UPDATE, DELETE)
- DQL (Data Query Language) - vÄ›tÅ¡inou zahrnuto do DML
- DCL (Data Control Language) - Å™Ã­zenÃ­ transakcÃ­ a specifikaci pÅ™Ã­stupovÃ½ch oprÃ¡vnÄ›nÃ­.

## DotazovÃ¡nÃ­

Dotaz se sklÃ¡dÃ¡ z `projekce` (povinnÃ©) a `selekce` (nepovinnÃ©)

- Projekce je vÃ½bÄ›r jednotlivÃ½ch sloupcÅ¯ (SELECT sloupec FROM tabulka)

- Selekce nÃ¡m filtruje danÃ© Å™Ã¡dky (WHERE)

DÃ¡le mÅ¯Å¾eme seskupovat (GROUP BY) nebo Å™adit (ORDER BY)

CelÃ¡ anatomie pÅ™Ã­kazu SELECT:

```
SELECT zdrojovÃ¡ projekce
FROM datovÃ© zdroje
[ WHERE selekce ]
[ GROUP BY seskupenÃ­
  [ HAVING selekce seskupenÃ­] ]
[ ORDER BY Å™azenÃ­ ]
```

pouÅ¾Ã­vanÃ¡ synonyma:

- selekce = restrikce

- seskupenÃ­ = agregace

### Projekce

- povinnÃ¡ ÄÃ¡st dotazu
- vÃ½bÄ›r jednotlivÃ½ch sloupcÅ¯, kterÃ© je potÅ™eba vypsat. NemusÃ­ se vÅ¾dy jednat pouze o sloupce. Je zde moÅ¾nÃ© uvÃ©st i konstanty Äi vÃ½razy.
- sloupce uvedenÃ© v projekci je moÅ¾nÃ© pÅ™ejmenovat pomocÃ­ tzv. aliasÅ¯

```
(SELECT sloupec FROM tabulka)
```

### Selekce

- filtruje nÃ¡m danÃ© Å™Ã¡dky pomocÃ­ podmÃ­nky
- srovnÃ¡vacÃ­m operÃ¡torem bÃ½vajÃ­ nejÄastÄ›ji relaÄnÃ­ operÃ¡tory (==, <, >, ...)
- kromÄ› relaÄnÃ­ch operÃ¡torÅ¯ mÅ¯Å¾eme pouÅ¾Ã­t operÃ¡tory jako LIKE, BETWEEN, IN, ...
- poslednÃ­ operÃ¡tory, kterÃ© mÅ¯Å¾eme pouÅ¾Ã­t jsou logickÃ© operÃ¡tory (NOT, AND, OR)

```
WHERE nÃ¡zev_sloupce srovnÃ¡vacÃ­_podmÃ­nka nÃ¡zev_sloupce | konstanta | vÃ½raz
```

### Å˜azenÃ­

- vÅ¾dy na konci dotazu (ORDER BY)
- Å™adit mÅ¯Å¾eme vzestupnÄ› (ASC) nebo sestupnÄ› (DESC)
- NULL nelze Å™adit, je vÅ¡ak moÅ¾nÃ© urÄit, zda Å™Ã¡dky s prÃ¡zdnÃ½mi hodnotami budou na zaÄÃ¡tku, nebo na konci

```
 SELECT *
FROM zamestnanci
ORDER BY plat DESC, prijmeni ASC NULLS LAST;
```

### SeskupenÃ­

- VyuÅ¾itÃ­ agregaÄnÃ­ch funkcÃ­ (SUM, AVG, MIN, MAX) na podmnoÅ¾iny
- vÃ½sledkem je logickÃ© rozdÄ›lenÃ­ na skupiny, ve kterÃ½ch je hodnota zvolenÃ©ho kritÃ©ria pro vÅ¡echny Å™Ã¡dky stejnÃ¡

```
SELECT id_oddeleni, AVG(plat)
FROM zamestnanci
GROUP BY id_oddeleni;
```

- seskupenÃ­ je samozÅ™ejmÄ› moÅ¾nÃ© spojit i se selekcÃ­

```
SELECT id_oddeleni, AVG(plat)
FROM zamestnanci
WHERE id_pracovni_pozice !=
      (SELECT id_pracovni_pozice
       FROM pracovni_pozice
       WHERE nazev='ÃºklidovÃ½ pracovnÃ­k')
GROUP BY id_oddeleni;
```

### Selekce seskupenÃ­

- pokud pouÅ¾ijeme seskupenÃ­ (GROUP BY) a chceme v danÃ½ch podmnoÅ¾inÃ¡ch dÃ¡le filtrovat Å™Ã¡dky, pouÅ¾Ã­jeme selekci seskupenÃ­ (HAVING)

```
SELECT id_oddeleni, AVG(plat)
FROM zamestnanci
GROUP BY id_oddeleni
HAVING AVG(plat)> 20000;
```

## DatovÃ½ slovnÃ­k

= ÄÃ¡st databÃ¡ze, kterÃ¡ obsahuje systÃ©movÃ© informace. Je automaticky udrÅ¾ovÃ¡n databÃ¡zovÃ½m systÃ©mem (Oracle, MySQL)

- informace o struktuÅ™e databÃ¡zÃ­
- informace o objektech uloÅ¾enÃ½ch v databÃ¡zi (tabulky, pohledy, indexy atd.)
- informace o uÅ¾ivatelÃ­ch a jejich oprÃ¡vnÄ›nÃ­ch (integritnÃ­ omezenÃ­)
- triggery a procedury

ÃºÄel:

- ÃºloÅ¾iÅ¡tÄ› informacÃ­
- pÅ™ehled o struktuÅ™e a vlastnostech dat - slouÅ¾Ã­ jako automatizovanÃ¡ forma dokumentace databÃ¡zovÃ© struktury
- umoÅ¾Åˆuje sledovat a vynucovat integritnÃ­ omezenÃ­ a pravidla v databÃ¡zi

## Transakce

= skupina pÅ™Ã­kazÅ¯, kterÃ© pÅ™evedou databÃ¡zi z jednoho konzistentnÃ­ho stavu do druhÃ©ho (jsou splnÄ›na vÅ¡echna integritnÃ­ omezenÃ­)

TransakÄnÃ­ databÃ¡zovÃ© systÃ©my (DS podporujÃ­cÃ­ transakce) bÃ½vajÃ­ takÃ© oznaÄovÃ¡ny jako `ACID` databÃ¡ze:

- AtomiÄnost (Atomicity) - transakce je nedÄ›litelnÃ¡ = pokud se transakce sklÃ¡dÃ¡ z vÃ­ce operacÃ­, musÃ­ bÃ½t splnÄ›ny vÅ¡echny nebo Å¾Ã¡dnÃ¡
- ZajiÅ¡tÄ›nÃ­ konzistence (Consistency) - v Å¾Ã¡dnÃ©m okamÅ¾iku nesmÃ­ bÃ½t poruÅ¡eno integritnÃ­ omezenÃ­
- Izolovanost (Isolation) - transakce musÃ­ bÃ½t vzÃ¡jemnÄ› nezÃ¡vislÃ© (danÃ© operace jsou skryty, neovlivnÃ­ dalÅ¡Ã­ transakce, vrÃ¡cenÃ­m transakce nenÃ­ zasaÅ¾ena jinÃ¡ transakce a pokud ano tak i zasaÅ¾enÃ¡ transakce musÃ­ bÃ½t vrÃ¡cena)
- Trvalost (Durability) - zmÄ›ny po ÃºspÄ›Å¡nÃ½ch transakcÃ­ch, kterÃ© jsou uloÅ¾eny v databÃ¡zy nesmÃ­ bÃ½t ztraceny

### Å˜Ã­zenÃ­ transakce

`COMMIT` - veÅ¡kerÃ© zmÄ›ny transakce jsou pÅ™ijaty

`ROLLBACK` - situace se vracÃ­ do okamÅ¾iku pÅ™ed zahÃ¡jenÃ­m transakce

`SAVEPOINT` - vytvoÅ™Ã­ znaÄku (zÃ¡chytnÃ½ bod) v transakci, kterÃ¡ rozdÄ›luje transakci na menÅ¡Ã­ ÄÃ¡sti

`ROLLBACK TO SAVEPOINT` - vrÃ¡cenÃ­ zpÄ›t na savepoint. ZahodÃ­ se zmÄ›ny, kterÃ© byly provedeny potÃ©, co byl zaloÅ¾en savepoint

### ProblÃ©my pÅ™i prÅ¯bÄ›hu transakcÃ­

ZtrÃ¡ta aktualizace = aktualizace, kterou provede transakce T1, je ztracena, jakmile transakce T2 provede svou aktualizaci

NepotvrzenÃ© ÄtenÃ­ = transakce mohou ÄÃ­st zmÄ›ny provedenÃ© v dalÅ¡Ã­ transakci, kdyÅ¾ jeÅ¡tÄ› nejsou uloÅ¾enÃ©/potvrzenÃ©

NeopakovatelnÃ© ÄtenÃ­ = podobnÃ© jako nepotvrzenÃ© ÄtenÃ­. Transakce updatuje data bÄ›hem toho co jinÃ¡ transakce tyto data Äte - na stejnÃ½ dotaz dostane transakce jinÃ¡ data (mÃ©nÄ› dat)

FantomovÃ© ÄtenÃ­ = stejnÃ© jako neopakovatelnÃ© ÄtenÃ­. Na stejnÃ½ dotaz bÄ›hem jednÃ© transakce dostanu jinÃ¡ data (vÃ­ce dat)

**_Å˜eÅ¡enÃ­ problÃ©mÅ¯_**
= vytvoÅ™enÃ­ rozvrhu (posloupnost vÅ¡ech operacÃ­) - hledÃ¡ se takovÃ© Å™eÅ¡enÃ­, aby byly splnÄ›nÃ© vÅ¡echny ACID vlastnosti (hlavnÄ› izolace). ProblÃ©m je, Å¾e pÅ™i velkÃ© izolaci dochÃ¡zÃ­ k serializaci (pÅ™evedenÃ­ do sekvenÄnÃ­ podoby) - coÅ¾ sniÅ¾uje moÅ¾nost paralelnÃ­ho zpracovÃ¡nÃ­

NajÃ­t sprÃ¡vnou mÃ­ru mezi izolovanostÃ­ a paralelnÃ­m zpracovÃ¡nÃ­m mÅ¯Å¾e bÃ½t obtÃ­Å¾nÃ©. V databÃ¡zovÃ½ch systÃ©mech je moÅ¾nÃ© nastavit ÃºroveÅˆ izolace na nÄ›kolik ÃºrovnÃ­:

- `READ COMMITED` â€“ bÄ›Å¾nÃ½ reÅ¾im (nenÃ­ Å¾Ã¡dnÃ¡ izolace v rÃ¡mci DQL)
- `READ UNCOMMITED` â€“ nepotvrzenÃ© ÄtenÃ­
- `REPEATABLE READ` â€“ ÄtecÃ­ stabilita
- `SERIALIZABLE` â€“ vytvÃ¡Å™Ã­ vÄ›tÅ¡Ã­ prostor pro deadlock

**Deadlock (UvÃ¡znutÃ­)**

pro kaÅ¾dou transakci ze skupiny transakcÃ­ platÃ­:

- kaÅ¾dÃ¡ transakce ze skupiny je blokovÃ¡na ÄekÃ¡nÃ­m na objekt databÃ¡ze (na jeho odemknutÃ­)
- ukonÄenÃ­ vÅ¡ech transakcÃ­ mimo uvedenou skupinu transakcÃ­ neumoÅ¾nÃ­ odblokovÃ¡nÃ­ Å¾Ã¡dnÃ© transakce ve skupinÄ›

_uvÃ¡znutÃ­ mÅ¯Å¾eme vyÅ™eÅ¡it:_

- detekcÃ­ uvÃ¡znutÃ­ - pravidelnÃ¡ kontrola, aby se zjistilo, jestli nedoÅ¡lo k deadlocku. Pokud se objevÃ­, systÃ©m ho odstranÃ­. Detekci uvÃ¡znutÃ­ a nÃ¡slednÃ© odstranÄ›nÃ­ uÅ¾Ã­vÃ¡me pÅ™i uzamykacÃ­m protokolu (soubor pravidel, kterÃ© urÄujÃ­, jakÃ½m zpÅ¯sobem transakce mohou zÃ­skÃ¡vat a uvolÅˆovat zÃ¡mky na databÃ¡zovÃ½ch objektech)
- pÅ™edchÃ¡zenÃ­ uvÃ¡znutÃ­ - pouÅ¾Ã­vÃ¡me metodu ÄasovÃ½ch razÃ­tek (kaÅ¾dÃ¡ operace dostane svoje ÄasovÃ© razÃ­tko - podle Äasu se pak orientujeme co je povolenÃ© a co nenÃ­)

**_PostavenÃ­ v tÅ™Ã­vrstvÃ© architektuÅ™e_**
DatabÃ¡ze je souÄÃ¡stÃ­ tÅ™Ã­vrstvÃ© architektury (prezentaÄnÃ­ vrstva, funkÄnÃ­ vrstva, datovÃ¡ vrstva - databÃ¡ze)

FunkÄnÃ­ vrstva pracuje s daty z databÃ¡ze a ty pak pÅ™edÃ¡vÃ¡ prezentaÄnÃ­ vrstvÄ›.

Moc nevÃ­m co jinÃ©ho k tomu napsat :-D

---

## RozÅ¡iÅ™ujÃ­cÃ­ a praktickÃ© pÅ™Ã­klady ke stÃ¡tnicÃ­m

### 1. PÅ™Ã­klady pro kaÅ¾dou normÃ¡lnÃ­ formu

**1NF (atomiÄnost):**

- Å patnÄ›:

  | id  | jmÃ©no | telefon  |
  | --- | ----- | -------- |
  | 1   | Adam  | 123, 456 |

- DobÅ™e:

  | id  | jmÃ©no | telefon |
  | --- | ----- | ------- |
  | 1   | Adam  | 123     |
  | 1   | Adam  | 456     |

**2NF (plnÃ¡ zÃ¡vislost na klÃ­Äi):**

- **Å patnÄ›:**

  | id_obj | id_zak | jmÃ©no_zak | ... |
  | ------ | ------ | --------- | --- |
  | 1      | 10     | NovÃ¡k     | ... |
  | 2      | 11     | Svoboda   | ... |

  > `jmÃ©no_zak` zÃ¡visÃ­ pouze na `id_zak`, ne na celÃ©m sloÅ¾enÃ©m klÃ­Äi (`id_obj`, `id_zak`).

- **DobÅ™e:**  
  RozdÄ›lit na dvÄ› tabulky:

  **ObjednÃ¡vky**
  | id_obj | id_zak | ... |
  |--------|--------|-----|
  | 1 | 10 | ... |
  | 2 | 11 | ... |

  **ZÃ¡kaznÃ­ci**
  | id_zak | jmÃ©no_zak |
  |--------|-----------|
  | 10 | NovÃ¡k |
  | 11 | Svoboda |

---

**3NF (Å¾Ã¡dnÃ© tranzitivnÃ­ zÃ¡vislosti):**

- **Å patnÄ›:**

  | id  | jmÃ©no | psc   | mÄ›sto |
  | --- | ----- | ----- | ----- |
  | 1   | Adam  | 10000 | Praha |
  | 2   | Eva   | 60200 | Brno  |

  > `mÄ›sto` zÃ¡visÃ­ na `psc`, ne pÅ™Ã­mo na primÃ¡rnÃ­m klÃ­Äi.

- **DobÅ™e:**  
  RozdÄ›lit na dvÄ› tabulky:

  **Osoby**
  | id | jmÃ©no | psc |
  |----|-------|-------|
  | 1 | Adam | 10000 |
  | 2 | Eva | 60200 |

  **MÄ›sta**
  | psc | mÄ›sto |
  |-------|----------|
  | 10000 | Praha |
  | 60200 | Brno |

### 2. PÅ™Ã­klady transakÄnÃ­ch problÃ©mÅ¯

**ZtrÃ¡ta aktualizace:**

- T1: SELECT plat FROM zamestnanci WHERE id=1; (plat=20000)
- T2: SELECT plat FROM zamestnanci WHERE id=1; (plat=20000)
- T1: UPDATE zamestnanci SET plat=21000 WHERE id=1;
- T2: UPDATE zamestnanci SET plat=22000 WHERE id=1; (pÅ™epÃ­Å¡e zmÄ›nu T1)

**Å pinavÃ© ÄtenÃ­ (dirty read):**

- T1: UPDATE zamestnanci SET plat=21000 WHERE id=1;
- T2: SELECT plat FROM zamestnanci WHERE id=1; (vidÃ­ neuloÅ¾enou zmÄ›nu)
- T1: ROLLBACK;

**NeopakovatelnÃ© ÄtenÃ­:**

- T1: SELECT plat FROM zamestnanci WHERE id=1; (plat=20000)
- T2: UPDATE zamestnanci SET plat=21000 WHERE id=1; COMMIT;
- T1: SELECT plat FROM zamestnanci WHERE id=1; (plat=21000)

**FantomovÃ© ÄtenÃ­:**

- T1: SELECT \* FROM objednavky WHERE cena > 1000;
- T2: INSERT INTO objednavky (cena) VALUES (1500); COMMIT;
- T1: SELECT \* FROM objednavky WHERE cena > 1000; (novÃ½ Å™Ã¡dek navÃ­c)

### 3. Indexy a optimalizace dotazÅ¯

- **Index** je datovÃ¡ struktura pro rychlÃ© vyhledÃ¡vÃ¡nÃ­ v tabulce podle sloupce.
- VytvoÅ™enÃ­ indexu:
  ```sql
  CREATE INDEX idx_jmeno ON zamestnanci(jmeno);
  ```
- Indexy zrychlujÃ­ SELECT, ale zpomalujÃ­ INSERT/UPDATE/DELETE.

### 4. RelaÄnÃ­ vs. NoSQL databÃ¡ze

- **RelaÄnÃ­:** tabulky, SQL, pevnÃ© schÃ©ma, ACID (MySQL, PostgreSQL, Oracle)
- **NoSQL:** dokumentovÃ© (MongoDB), key-value (Redis), grafovÃ© (Neo4j), flexibilnÃ­ schÃ©ma, BASE, vhodnÃ© pro velkÃ¡ data a nestandardnÃ­ struktury

### 5. PÅ™Ã­klady DDL, DML, DCL pÅ™Ã­kazÅ¯

- DDL:
  ```sql
  CREATE TABLE osoby (id INT PRIMARY KEY, jmeno VARCHAR(50));
  ALTER TABLE osoby ADD COLUMN prijmeni VARCHAR(50);
  DROP TABLE osoby;
  ```
- DML:
  ```sql
  INSERT INTO osoby (id, jmeno) VALUES (1, 'Adam');
  UPDATE osoby SET jmeno='Eva' WHERE id=1;
  DELETE FROM osoby WHERE id=1;
  ```
- DCL:
  ```sql
  GRANT SELECT ON osoby TO uzivatel1;
  REVOKE SELECT ON osoby FROM uzivatel1;
  ```

### 6. Pohled (view), trigger, uloÅ¾enÃ¡ procedura

- **Pohled:**
  ```sql
  CREATE VIEW zamestnanci_vysoky_plat AS SELECT * FROM zamestnanci WHERE plat > 50000;
  ```
- **Trigger:**
  ```sql
  CREATE TRIGGER kontrola_platu BEFORE INSERT ON zamestnanci FOR EACH ROW
  BEGIN
    IF NEW.plat < 15000 THEN
      SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Plat je pÅ™Ã­liÅ¡ nÃ­zkÃ½';
    END IF;
  END;
  ```
- **UloÅ¾enÃ¡ procedura:**
  ```sql
  CREATE PROCEDURE zvys_plat(IN zam_id INT, IN castka DECIMAL(10,2))
  BEGIN
    UPDATE zamestnanci SET plat = plat + castka WHERE id = zam_id;
  END;
  ```

### 7. SprÃ¡va uÅ¾ivatelÅ¯ a prÃ¡v

- VytvoÅ™enÃ­ uÅ¾ivatele:
  ```sql
  CREATE USER 'uzivatel1' IDENTIFIED BY 'heslo';
  ```
- UdÄ›lenÃ­ prÃ¡v:
  ```sql
  GRANT SELECT, INSERT ON databaze.* TO 'uzivatel1';
  ```
- OdebrÃ¡nÃ­ prÃ¡v:
  ```sql
  REVOKE INSERT ON databaze.* FROM 'uzivatel1';
  ```
- SmazÃ¡nÃ­ uÅ¾ivatele:
  ```sql
  DROP USER 'uzivatel1';
  ```

### 8. DatovÃ½ slovnÃ­k v konkrÃ©tnÃ­ch SÅ˜BD

- **Oracle:** tabulky ALL_TABLES, USER_TABLES, ALL_TAB_COLUMNS
- **PostgreSQL:** tabulka information_schema.tables, information_schema.columns
- **MySQL:** tabulka information_schema.tables, information_schema.columns

### 9. VÃ½znam dokumentace a datovÃ©ho slovnÃ­ku

- Dokumentace a datovÃ½ slovnÃ­k jsou klÃ­ÄovÃ© pro sprÃ¡vu, rozvoj a pÅ™edÃ¡vÃ¡nÃ­ databÃ¡ze dalÅ¡Ã­m sprÃ¡vcÅ¯m.
- UmoÅ¾ÅˆujÃ­ rychlou orientaci v datech, kontrolu integrity a efektivnÃ­ rozvoj systÃ©mu.

### 10. Architektura klient-server a tÅ™Ã­vrstvÃ¡ architektura

- **Klient-server:** klient (aplikace) posÃ­lÃ¡ dotazy serveru (SÅ˜BD), server zpracuje a vracÃ­ data.
- **TÅ™Ã­vrstvÃ¡ architektura:** prezentaÄnÃ­ vrstva (UI), aplikaÄnÃ­ logika (server), datovÃ¡ vrstva (databÃ¡ze).

---

TÃ­mto jsou pokryty vÅ¡echny zÃ¡kladnÃ­ i rozÅ¡iÅ™ujÃ­cÃ­ pojmy ke stÃ¡tnicÃ­m k tÃ©matu SÅ˜BD.
